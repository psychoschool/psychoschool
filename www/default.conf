server {
  listen 5000;

  brotli on;
  brotli_comp_level 6;
  brotli_static on;
  brotli_types application/atom+xml application/javascript application/json application/rss+xml
               application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype
               application/x-font-ttf application/x-javascript application/xhtml+xml application/xml
               font/eot font/opentype font/otf font/truetype image/svg+xml image/vnd.microsoft.icon
               image/x-icon image/x-win-bitmap text/css text/javascript text/plain text/xml;

  # Recursively process X-Forwarded-For header
  real_ip_recursive on;
  real_ip_header    X-Forwarded-For;

  # Allow for internal Heroku router - 10.x.x.x
  set_real_ip_from  10.0.0.0/8;

  add_header 'Host' "$host";
  add_header 'X-Real-IP' "$remote_addr";

  location / {
    root /usr/share/nginx/html;
    index index.html index.htm;
    try_files $uri $uri/ /index.html;
  }
}
